{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "Renovates this repositories",
  "extends": [
    "config:recommended",
    "npm:unpublishSafe",
    ":combinePatchMinorReleases",
    ":semanticCommits",
    ":semanticCommitTypeAll(chore)",
    ":semanticCommitScopeDisabled"
  ],
  "onboarding": false,
  "requireConfig": "ignored",
  "dependencyDashboard": true,
  "automerge": true,
  "autoApprove": true,
  "prHourlyLimit": 0,
  "prConcurrentLimit": 0,
  "enabledManagers": ["npm"],
  "npm": {
    "ignorePaths": ["*/**/package.json"]
  },
  "printConfig": true,
  "labels": ["renovate"],
  "allowedPostUpgradeCommands": ["^(pnpm|echo|git)"],
  "postUpgradeTasks": {
    "description": "Renovate ignores nested package jsons. Use eslint to align dependencies in projects package.json when the root package.json changed.",
    "commands": [
      "echo 'Install node_modules when missing in order to run eslint'; dir='node_modules'; [ -d \"$dir\" ] && find \"$dir\" -mindepth 1 -maxdepth 1 -type d | wc -l || pnpm i --frozen-lockfile",
      "pnpm exec nx run-many -t lint-eslint --fix --rule '{\"@nx/dependency-checks\": \"error\"}'",
      "git status"
    ],
    "executionMode": "branch",
    "fileFilters": ["**/package.json"]
  },
  "lockFileMaintenance": {
    "enabled": true
  },
  "packageRules": [
    {
      "matchUpdateTypes": ["major"],
      "automerge": false
    },
    {
      "description": "When renovate changes packages, better have a look O_O",
      "matchFileNames": ["packages/**/*"],
      "automerge": false
    },
    {
      "description": "ignore '@robby-rabbitman/nx-plus-*' packages, as nx release will handle it",
      "matchPackagePatterns": ["^@robby-rabbitman/nx-plus-"],
      "enabled": false
    },
    {
      "description": "Groups all 'prettier' packages together. Remove me when there is a group preset",
      "groupName": "prettier",
      "matchManagers": ["npm"],
      "matchPackagePatterns": ["^prettier$", "^prettier-"]
    },
    {
      "description": "Groups all 'nx' packages together. Remove me when there is a group preset",
      "groupName": "nx",
      "matchManagers": ["npm"],
      "matchPackagePatterns": ["^@nx/", "^nx$"]
    }
  ]
}
